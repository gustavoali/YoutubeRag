# ============================================
# YoutubeRag.NET Environment Configuration Template
# ============================================
# Copy this file to .env.local for local development
# Copy this file to .env.ci for CI/CD environment
# Copy this file to .env.production for production deployment
#
# Last Updated: 2025-10-10
# ============================================

# ============================================
# ASPNETCORE ENVIRONMENT
# ============================================
# Environment name - determines which appsettings.{Environment}.json is loaded
# Valid values: Development, Local, Testing, Production
ASPNETCORE_ENVIRONMENT=Development

# Application URLs (internal container binding)
ASPNETCORE_URLS=http://+:8080

# ============================================
# DATABASE CONFIGURATION
# ============================================
# MySQL Database Settings
# Windows default: Server=localhost;Port=3306;Database=youtube_rag_db;Uid=youtube_rag_user;Pwd=youtube_rag_password;
# Linux/Container default: Server=mysql;Port=3306;Database=youtube_rag_db;Uid=youtube_rag_user;Pwd=youtube_rag_password;

# MySQL root password (used by Docker container for initial setup)
MYSQL_ROOT_PASSWORD=rootpassword

# Application database name
MYSQL_DATABASE=youtube_rag_db

# Application database user
MYSQL_USER=youtube_rag_user

# Application database password
MYSQL_PASSWORD=youtube_rag_password

# MySQL exposed port (host machine)
MYSQL_PORT=3306

# Full connection string (override individual settings above)
# ConnectionStrings__DefaultConnection=Server=localhost;Port=3306;Database=youtube_rag_db;Uid=youtube_rag_user;Pwd=youtube_rag_password;AllowPublicKeyRetrieval=True;

# ============================================
# REDIS CONFIGURATION
# ============================================
# Redis connection settings for caching and session management
# Windows/Local default: localhost:6379
# Container default: redis:6379

# Redis password (leave empty for no authentication in development)
REDIS_PASSWORD=

# Redis exposed port (host machine)
REDIS_PORT=6379

# Full Redis connection string (override)
# Redis__ConnectionString=localhost:6379,password=

# ============================================
# JWT AUTHENTICATION SETTINGS
# ============================================
# JWT Secret Key - MUST be at least 256 bits (32 characters)
# SECURITY WARNING: Change this in production! Generate with: openssl rand -base64 32
JWT_SECRET=development-secret-please-change-in-production-youtube-rag-api-2024

# JWT Issuer (who creates the token)
JWT_ISSUER=YoutubeRagAPI

# JWT Audience (who the token is for)
JWT_AUDIENCE=YoutubeRagClient

# JWT Token expiration in minutes
JWT_EXPIRATION_MINUTES=60

# Refresh token expiration in days
JWT_REFRESH_TOKEN_EXPIRY_DAYS=7

# ============================================
# OPENAI CONFIGURATION (Optional)
# ============================================
# OpenAI API Key for embeddings and advanced features
# Leave empty if using local embeddings only
OPENAI_API_KEY=

# ============================================
# FILE PROCESSING PATHS
# ============================================
# Temporary file storage path for video/audio processing
# Windows default: C:\Temp\YoutubeRag
# Linux/Container default: /tmp/youtuberag or /app/temp
# NOTE: Use PathService in code for cross-platform compatibility
PROCESSING_TEMP_PATH=/app/temp

# Whisper model storage path
# Windows default: C:\Models\Whisper
# Linux/Container default: /tmp/whisper-models or /app/models
WHISPER_MODELS_PATH=/app/models

# FFmpeg executable path (usually just 'ffmpeg' if in PATH)
FFMPEG_PATH=ffmpeg

# Upload directory for user files
UPLOAD_PATH=/app/uploads

# Maximum upload size in MB
MAX_UPLOAD_SIZE_MB=2048

# Minimum required disk space in GB
MIN_DISK_SPACE_GB=10

# ============================================
# WHISPER TRANSCRIPTION SETTINGS
# ============================================
# Default Whisper model to use (tiny, base, small, medium, large)
# 'auto' automatically selects based on video duration
WHISPER_DEFAULT_MODEL=auto

# Force a specific model (overrides auto-selection)
WHISPER_FORCE_MODEL=

# Model download base URL
WHISPER_MODEL_DOWNLOAD_URL=https://openaipublic.azureedge.net/main/whisper/models/

# Cleanup unused models after N days
WHISPER_CLEANUP_UNUSED_MODELS_DAYS=30

# Download retry attempts
WHISPER_DOWNLOAD_RETRY_ATTEMPTS=3

# Delay between retries in seconds
WHISPER_DOWNLOAD_RETRY_DELAY_SECONDS=5

# Model cache duration in minutes
WHISPER_MODEL_CACHE_DURATION_MINUTES=60

# Duration thresholds for auto model selection (in seconds)
WHISPER_TINY_MODEL_THRESHOLD_SECONDS=600
WHISPER_BASE_MODEL_THRESHOLD_SECONDS=1800

# ============================================
# YOUTUBE DOWNLOAD SETTINGS
# ============================================
# YouTube API timeout in seconds
YOUTUBE_TIMEOUT_SECONDS=30

# Maximum retry attempts for YouTube operations
YOUTUBE_MAX_RETRIES=3

# Maximum video duration to process (in seconds, 14400 = 4 hours)
YOUTUBE_MAX_VIDEO_DURATION_SECONDS=14400

# Metadata cache duration in minutes
YOUTUBE_METADATA_CACHE_DURATION_MINUTES=5

# ============================================
# APPLICATION SETTINGS
# ============================================
# Processing mode: Mock (for testing) or Real (actual processing)
PROCESSING_MODE=Real

# Storage mode: Memory (for testing) or Database (persistent storage)
STORAGE_MODE=Database

# Enable JWT authentication (false for development/testing, true for production)
ENABLE_AUTH=false

# Enable WebSockets for real-time updates
ENABLE_WEBSOCKETS=true

# Enable Prometheus metrics
ENABLE_METRICS=true

# Enable real video processing (vs mock processing)
ENABLE_REAL_PROCESSING=true

# Enable Swagger/OpenAPI documentation
ENABLE_DOCS=true

# Enable CORS
ENABLE_CORS=true

# Enable Hangfire background jobs
ENABLE_BACKGROUND_JOBS=true

# Maximum concurrent background jobs
MAX_CONCURRENT_JOBS=3

# Enable Hangfire dashboard
ENABLE_HANGFIRE_DASHBOARD=true

# ============================================
# CORS SETTINGS
# ============================================
# Allowed origins for CORS (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:8080,http://127.0.0.1:3000

# Allowed origins array format (for appsettings.json compatibility)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001,http://localhost:5173,http://localhost:8080

# ============================================
# RATE LIMITING
# ============================================
# Number of requests permitted in the time window
RATE_LIMIT_PERMIT=200

# Time window in minutes
RATE_LIMIT_WINDOW_MINUTES=1

# ============================================
# CLEANUP SETTINGS
# ============================================
# Job retention period in days
CLEANUP_JOB_RETENTION_DAYS=30

# Notification retention period in days
CLEANUP_NOTIFICATION_RETENTION_DAYS=60

# Notification deduplication window in minutes
CLEANUP_NOTIFICATION_DEDUPLICATION_MINUTES=5

# Temp file cleanup after hours
CLEANUP_TEMP_FILES_AFTER_HOURS=24

# ============================================
# LOGGING CONFIGURATION
# ============================================
# Log level: Trace, Debug, Information, Warning, Error, Critical
LOG_LEVEL=Information

# ASP.NET Core log level
LOG_LEVEL_ASPNET=Warning

# Entity Framework log level
LOG_LEVEL_EF=Warning

# ============================================
# DOCKER COMPOSE SETTINGS
# ============================================
# Docker Compose project name (prefix for containers)
COMPOSE_PROJECT_NAME=youtube-rag

# Enable Docker BuildKit for faster builds
DOCKER_BUILDKIT=1

# Docker build target stage (runtime, test, development)
BUILD_TARGET=runtime

# Application version/tag
VERSION=latest

# ============================================
# API CONFIGURATION
# ============================================
# API exposed port (host machine)
API_PORT=5000

# Application base URL (for external access)
APP_URL=http://localhost:5000

# ============================================
# DEVELOPMENT TOOLS (optional, use with docker-compose --profile dev-tools)
# ============================================
# Redis Commander Web UI
REDIS_COMMANDER_PORT=8081
REDIS_COMMANDER_USER=admin
REDIS_COMMANDER_PASSWORD=admin

# Adminer Database Web UI
ADMINER_PORT=8080

# ============================================
# MONITORING (optional, use with docker-compose --profile monitoring)
# ============================================
# Prometheus metrics collection
PROMETHEUS_PORT=9090

# Grafana dashboards
GRAFANA_PORT=3001
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin

# ============================================
# HEALTH CHECK SETTINGS
# ============================================
# Health check endpoints are available at:
# /health - Full health check with all components
# /ready - Readiness probe (critical components only)
# /live - Liveness probe (application is alive)

# ============================================
# VECTOR DATABASE (Future/Optional)
# ============================================
# PostgreSQL with pgvector extension for vector embeddings
# VECTOR_DB_HOST=localhost
# VECTOR_DB_PORT=5432
# VECTOR_DB_NAME=youtube_rag_vectors
# VECTOR_DB_USER=postgres
# VECTOR_DB_PASSWORD=postgres

# ============================================
# ENVIRONMENT-SPECIFIC NOTES
# ============================================
#
# LOCAL DEVELOPMENT (Windows):
# - PROCESSING_TEMP_PATH=C:\Temp\YoutubeRag
# - WHISPER_MODELS_PATH=C:\Models\Whisper
# - ConnectionStrings__DefaultConnection uses 'localhost'
# - ENABLE_AUTH=false
# - ENABLE_DOCS=true
#
# LOCAL DEVELOPMENT (Linux/Mac):
# - PROCESSING_TEMP_PATH=/tmp/youtuberag
# - WHISPER_MODELS_PATH=/tmp/whisper-models
# - ConnectionStrings__DefaultConnection uses 'localhost'
# - ENABLE_AUTH=false
# - ENABLE_DOCS=true
#
# CI/TESTING:
# - ASPNETCORE_ENVIRONMENT=Testing
# - PROCESSING_TEMP_PATH=/tmp/youtuberag
# - WHISPER_MODELS_PATH=/tmp/whisper-models
# - ConnectionStrings__DefaultConnection uses service name 'mysql'
# - ENABLE_AUTH=false
# - STORAGE_MODE=Memory (for faster tests)
#
# DOCKER CONTAINER:
# - PROCESSING_TEMP_PATH=/app/temp
# - WHISPER_MODELS_PATH=/app/models
# - UPLOAD_PATH=/app/uploads
# - ConnectionStrings__DefaultConnection uses service name 'mysql'
# - Use volume mounts for persistent data
#
# PRODUCTION:
# - ASPNETCORE_ENVIRONMENT=Production
# - ENABLE_AUTH=true
# - ENABLE_DOCS=false
# - Use strong passwords and secrets
# - Use environment-specific secrets management (Azure Key Vault, AWS Secrets Manager)
# - Enable HTTPS
# - Configure proper CORS origins
#
# ============================================
